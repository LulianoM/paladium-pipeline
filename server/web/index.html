<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paladium Pipeline Server - HLS Player</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/hls.js@1.4.12/dist/hls.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>üé¨ Paladium Pipeline Server</h1>
            <p>Distribui√ß√£o de v√≠deo via HLS, SRT e WebRTC</p>
        </header>

        <main>
            <!-- Configura√ß√µes -->
            <section class="config-section">
                <h2>‚öôÔ∏è Configura√ß√µes</h2>
                <div class="config-grid">
                    <div class="config-item">
                        <label for="streamPath">Path do Stream:</label>
                        <input type="text" id="streamPath" value="cam1" placeholder="ex: cam1">
                    </div>
                    <div class="config-item">
                        <label for="serverHost">Host do Servidor:</label>
                        <input type="text" id="serverHost" value="localhost" placeholder="ex: localhost">
                    </div>
                </div>
                <button onclick="updateUrls()" class="btn btn-primary">üîÑ Atualizar URLs</button>
            </section>

            <!-- Player de V√≠deo -->
            <section class="player-section">
                <h2>üì∫ Player HLS</h2>
                <div class="video-container">
                    <video id="video" controls autoplay playsinline muted>
                        <p>Seu navegador n√£o suporta o elemento de v√≠deo.</p>
                    </video>
                    <div class="video-controls">
                        <button onclick="startStream()" class="btn btn-success">‚ñ∂Ô∏è Iniciar Stream</button>
                        <button onclick="stopStream()" class="btn btn-danger">‚èπÔ∏è Parar Stream</button>
                        <button onclick="toggleMute()" class="btn btn-secondary" id="muteBtn">üîä Som</button>
                    </div>
                </div>
            </section>

            <!-- URLs e Links -->
            <section class="urls-section">
                <h2>üîó URLs de Acesso</h2>
                <div class="urls-grid">
                    <div class="url-item">
                        <h3>HLS (Navegador)</h3>
                        <div class="url-box">
                            <code id="hlsUrl">http://localhost:8888/cam1/index.m3u8</code>
                            <button onclick="copyUrl('hlsUrl')" class="btn btn-copy">üìã</button>
                        </div>
                    </div>
                    
                    <div class="url-item">
                        <h3>SRT (VLC/FFplay)</h3>
                        <div class="url-box">
                            <code id="srtUrl">srt://localhost:9000?mode=caller&streamid=#!::r=cam1,m=read</code>
                            <button onclick="copyUrl('srtUrl')" class="btn btn-copy">üìã</button>
                        </div>
                    </div>
                    
                    <div class="url-item">
                        <h3>WebRTC (MediaMTX)</h3>
                        <div class="url-box">
                            <code id="webrtcUrl">http://localhost:8554/cam1</code>
                            <button onclick="openWebRTC()" class="btn btn-external">üåê Abrir Player</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Comandos de Teste -->
            <section class="commands-section">
                <h2>‚ö° Comandos de Teste</h2>
                <div class="commands-grid">
                    <div class="command-item">
                        <h3>VLC (SRT)</h3>
                        <div class="command-box">
                            <code id="vlcCommand">vlc srt://localhost:9000?mode=caller&streamid=#!::r=cam1,m=read</code>
                            <button onclick="copyUrl('vlcCommand')" class="btn btn-copy">üìã</button>
                        </div>
                    </div>
                    
                    <div class="command-item">
                        <h3>FFplay (HLS)</h3>
                        <div class="command-box">
                            <code id="ffplayCommand">ffplay http://localhost:8888/cam1/index.m3u8</code>
                            <button onclick="copyUrl('ffplayCommand')" class="btn btn-copy">üìã</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Status -->
            <section class="status-section">
                <h2>üìä Status</h2>
                <div class="status-grid">
                    <div class="status-item" id="hlsStatus">
                        <span class="status-label">HLS:</span>
                        <span class="status-value">Verificando...</span>
                    </div>
                    <div class="status-item" id="webrtcStatus">
                        <span class="status-label">WebRTC:</span>
                        <span class="status-value">Verificando...</span>
                    </div>
                    <div class="status-item" id="streamStatus">
                        <span class="status-label">Stream:</span>
                        <span class="status-value">Desconectado</span>
                    </div>
                </div>
                <button onclick="checkStatus()" class="btn btn-secondary">üîç Verificar Status</button>
            </section>
        </main>

        <footer>
            <p>Desenvolvido com ‚ù§Ô∏è para Paladium Pipeline | Powered by MediaMTX & HLS.js</p>
        </footer>
    </div>

    <script src="app.js"></script>
</body>
</html>
