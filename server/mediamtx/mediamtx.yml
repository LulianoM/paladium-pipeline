# MediaMTX Configuration
# Complete setup: Accept SRT from Pipeline 2, Expose SRT/WebRTC/HLS for viewing

# General settings
logLevel: info
logDestinations: [stdout]
logFile: ""

# API settings
api: yes
apiAddress: 0.0.0.0:9997
metrics: yes
metricsAddress: 0.0.0.0:9998

# RTMP settings (disabled)
rtmp: no

# RTSP settings (enabled for internal use, different port from Pipeline 1)
rtsp: yes
rtspAddress: :8555

# HLS settings - Enable for browser viewing
hls: yes
hlsAddress: :8888
hlsEncryption: no
hlsAllowOrigin: "*"
hlsVariant: fmp4
hlsSegmentCount: 7
hlsSegmentDuration: 1s
hlsPartDuration: 200ms
hlsSegmentMaxSize: 50M

# WebRTC settings - Enable for browser viewing
webrtc: yes
webrtcAddress: :8889
webrtcAllowOrigin: "*"
webrtcTrustedProxies: []
webrtcLocalUDPAddress: :8002
webrtcLocalTCPAddress: :8003
webrtcIPsFromInterfaces: yes
webrtcIPsFromInterfacesList: []
webrtcAdditionalHosts: []
webrtcICEServers2: []

# SRT settings - Main configuration for Pipeline 2
srt: yes
srtAddress: 0.0.0.0:8890

# Record settings (disabled)
record: no

# Path settings - Configure the main stream path
paths:
  # Main stream path - accepts SRT publish from Pipeline 2
  live:
    # Source: accept from publisher (Pipeline 2 via SRT)
    source: publisher
    
    # Keep stream alive longer for better resilience
    runOnDemandStartTimeout: 30s
    runOnDemandCloseAfter: 30s
